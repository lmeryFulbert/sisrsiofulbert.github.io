
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../02-dns/">
      
      
        <link rel="next" href="../04-hsrp/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.1">
    
    
      
        <title>03-NAT Dynamique (Masquerade) version Cisco - SISR BTS SIO FULBERT</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.45e1311d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#03-nat-dynamique-masquerade-version-cisco" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="SISR BTS SIO FULBERT" class="md-header__button md-logo" aria-label="SISR BTS SIO FULBERT" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SISR BTS SIO FULBERT
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              03-NAT Dynamique (Masquerade) version Cisco
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="SISR BTS SIO FULBERT" class="md-nav__button md-logo" aria-label="SISR BTS SIO FULBERT" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    SISR BTS SIO FULBERT
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Contexte
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Contexte
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contexte/01-pr%C3%A9sentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contexte SportLudique
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contexte/02_infrastructure-actuelle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Infrastructure actuelle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contexte/03-Objectifs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Objectifs à atteindre
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cours
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Cours
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-virtualisation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    01-Virtualisation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-dns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    02-DNS (Domain Name System)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    03-NAT Dynamique (Masquerade) version Cisco
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    03-NAT Dynamique (Masquerade) version Cisco
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#verification-du-contenu-de-la-table-de-nat" class="md-nav__link">
    <span class="md-ellipsis">
      Verification du contenu de la table de NAT
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gestion-avec-une-interface-de-management" class="md-nav__link">
    <span class="md-ellipsis">
      Gestion avec une interface de management
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-du-switch-pour-assurer-la-liaison" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration du switch pour assurer la liaison.
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04-hsrp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    04-FailOver avec le Protocole HSRP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05-docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    05 Docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06-reverse-proxy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    06 - Reverse Proxy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07-openvpn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    07 - OpenVPN
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08-messagerie/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    08 - Messagerie
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09-supervision/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    09 - Supervision
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Infrastructure
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Infrastructure
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/01-introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction sur l'infrastructure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/02-serveurs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Liste des serveurs et services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/03-infrastructure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Infrastructure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/04-annexes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Annexes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/05-fiche-recette/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fiche de Recette
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Situations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Situations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../situations/01-deploiements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Situation 1 - Deploy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../situations/02-documentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Situation 2 - Documentation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../situations/03-infrastructure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Situation 3 - Infrastructure
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#verification-du-contenu-de-la-table-de-nat" class="md-nav__link">
    <span class="md-ellipsis">
      Verification du contenu de la table de NAT
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gestion-avec-une-interface-de-management" class="md-nav__link">
    <span class="md-ellipsis">
      Gestion avec une interface de management
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-du-switch-pour-assurer-la-liaison" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration du switch pour assurer la liaison.
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="03-nat-dynamique-masquerade-version-cisco">03-NAT Dynamique (Masquerade) version Cisco</h1>
<p>Le NAT dynamique est une technique utilisée pour permettre à plusieurs dispositifs d'une réseau local (IP inside) de partager une seule adresse IP publique (IP outside) pour accéder à Internet ou d'autres réseaux externes.</p>
<p><strong>Éléments du NAT dynamique :</strong></p>
<ol>
<li>
<p><strong>IP Inside (Adresse privée)</strong> : L'adresse IP inside est l'adresse IP attribuée aux dispositifs du réseau local. Dans votre exemple, l'adresse IP inside est en 172.28.x.254/24. Ces adresses IP sont généralement privées et ne sont pas routables sur Internet.</p>
</li>
<li>
<p><strong>IP Outside (Adresse publique)</strong> : L'adresse IP outside est l'adresse IP attribuée au routeur ou au pare-feu qui relie le réseau local au réseau externe, généralement Internet. Dans votre exemple, l'adresse IP outside est en 183.44.x.1/30. Cette adresse IP est publique et utilisée pour communiquer avec des ressources sur Internet.</p>
</li>
<li>
<p><strong>Table de traduction (Translation Table)</strong> : La table de traduction est une table gérée par le routeur ou le pare-feu NAT qui associe les adresses IP inside aux adresses IP outside. Chaque fois qu'un dispositif du réseau local initie une connexion vers l'extérieur, une entrée est créée dans la table de traduction pour suivre la correspondance entre l'adresse IP inside et l'adresse IP outside.</p>
</li>
<li>
<p><strong>Port Mapping (Port Mapping)</strong> : Dans le cas du NAT dynamique, les numéros de port sont également modifiés. Cela permet à plusieurs dispositifs à l'intérieur du réseau local d'utiliser la même adresse IP publique en attribuant un numéro de port unique à chaque connexion. Ainsi, le routeur peut rediriger le trafic vers le dispositif approprié en fonction du numéro de port.</p>
</li>
</ol>
<p><strong>Configuration du NAT dynamique avec Cisco :</strong></p>
<p>Voici un exemple de configuration du NAT dynamique avec Cisco :</p>
<div class="highlight"><pre><span></span><code>interface<span class="w"> </span>GigabitEthernet0/0
<span class="w"> </span>ip<span class="w"> </span>address<span class="w"> </span><span class="m">183</span>.44.x.1<span class="w"> </span><span class="m">255</span>.255.255.252
<span class="w"> </span>ip<span class="w"> </span>nat<span class="w"> </span>outside

interface<span class="w"> </span>GigabitEthernet0/1
<span class="w"> </span>ip<span class="w"> </span>address<span class="w"> </span><span class="m">172</span>.28.x.254<span class="w"> </span><span class="m">255</span>.255.255.0
<span class="w"> </span>ip<span class="w"> </span>nat<span class="w"> </span>inside

ip<span class="w"> </span>nat<span class="w"> </span>inside<span class="w"> </span><span class="nb">source</span><span class="w"> </span>list<span class="w"> </span><span class="m">1</span><span class="w"> </span>interface<span class="w"> </span>GigabitEthernet0/0<span class="w"> </span>overload

access-list<span class="w"> </span><span class="m">1</span><span class="w"> </span>permit<span class="w"> </span><span class="m">172</span>.28.x.0<span class="w"> </span><span class="m">0</span>.0.0.255
</code></pre></div>
<p>Explications :</p>
<ul>
<li>
<p>La commande <code>ip nat outside</code> est appliquée à l'interface connectée à l'extérieur (GigabitEthernet0/0), tandis que <code>ip nat inside</code> est appliqué à l'interface connectée au réseau local (GigabitEthernet0/1).</p>
</li>
<li>
<p>La commande <code>ip nat inside source list 1 interface GigabitEthernet0/0 overload</code> définit la règle de translation NAT dynamique. Elle indique que toutes les adresses IP du réseau local (définies dans l'access-list 1) seront traduites en utilisant l'adresse IP publique de l'interface GigabitEthernet0/0, avec la surcharge (overload) pour gérer plusieurs connexions simultanées en utilisant le mappage de ports.</p>
</li>
<li>
<p>L'access-list 1 spécifie les adresses IP à l'intérieur du réseau local qui sont autorisées à être traduites.</p>
</li>
</ul>
<p>Ainsi, avec cette configuration, les dispositifs du réseau local avec des adresses IP en 172.28.x.x pourront accéder à Internet en partageant l'adresse IP publique 183.44.x.1 grâce au NAT dynamique. Chaque connexion sortante se verra attribuer un numéro de port unique pour permettre la correspondance correcte entre les dispositifs internes et l'adresse IP publique.</p>
<h2 id="verification-du-contenu-de-la-table-de-nat">Verification du contenu de la table de NAT</h2>
<p>Pour vérifier la table de translation NAT et la vider sur un routeur Cisco, vous pouvez utiliser les commandes suivantes :</p>
<p>Pour vérifier la table de translation NAT, utilisez la commande suivante :
<div class="highlight"><pre><span></span><code>show<span class="w"> </span>ip<span class="w"> </span>nat<span class="w"> </span>translations
</code></pre></div></p>
<p>Cette commande affichera une liste des entrées dans la table de translation NAT, montrant les adresses IP inside, les ports source, les adresses IP outside, les ports de destination, ainsi que le protocole utilisé.</p>
<p>Pour vider la table de translation NAT, utilisez la commande suivante :
<div class="highlight"><pre><span></span><code>clear<span class="w"> </span>ip<span class="w"> </span>nat<span class="w"> </span>translation<span class="w"> </span>*
</code></pre></div></p>
<p>Cette commande supprimera toutes les entrées de la table de translation NAT, réinitialisant ainsi les associations entre les adresses IP inside et outside. Assurez-vous d'utiliser cette commande avec précaution, car elle peut interrompre les connexions en cours.</p>
<h2 id="gestion-avec-une-interface-de-management">Gestion avec une interface de management</h2>
<p>Vous pouvez configurer le NAT avec une sous-interface dédiée au management qui n'est pas routée. Voici un exemple de configuration NAT avec une sous-interface sur un routeur Cisco, en supposant que vous avez déjà configuré une interface principale :</p>
<p>Configuration de la sous-interface pour le NAT :</p>
<div class="highlight"><pre><span></span><code>interface<span class="w"> </span>GigabitEthernet0/0.10
<span class="w"> </span>encapsulation<span class="w"> </span>dot1Q<span class="w"> </span><span class="m">10</span>
<span class="w"> </span>ip<span class="w"> </span>address<span class="w"> </span><span class="m">172</span>.28.x.254<span class="w"> </span><span class="m">255</span>.255.255.0
<span class="w"> </span>ip<span class="w"> </span>nat<span class="w"> </span>inside

interface<span class="w"> </span>GigabitEthernet0/0.20
<span class="w"> </span>encapsulation<span class="w"> </span>dot1Q<span class="w"> </span><span class="m">20</span>
<span class="w"> </span>ip<span class="w"> </span>address<span class="w"> </span><span class="m">192</span>.168.1.1<span class="w"> </span><span class="m">255</span>.255.255.0
<span class="w"> </span>no<span class="w"> </span>ip<span class="w"> </span>route-cache
</code></pre></div>
<p>Dans cet exemple :</p>
<ul>
<li>Nous avons créé deux sous-interfaces, "GigabitEthernet0/0.10" et "GigabitEthernet0/0.20", chacune avec son propre VLAN (10 et 20).</li>
<li>"GigabitEthernet0/0.10" est configuré comme une interface NAT inside, avec une adresse IP de 172.28.x.254/24. Cette sous-interface sera utilisée pour le trafic NAT.</li>
<li>"GigabitEthernet0/0.20" est configuré avec une adresse IP de gestion de 192.168.1.1/24, mais nous avons ajouté "no ip route-cache" pour empêcher cette interface d'être routée. Ainsi, cette sous-interface est dédiée au management et ne participera pas au processus de routage.</li>
</ul>
<p>Ensuite, vous pouvez configurer le NAT de la même manière que dans l'exemple précédent, en utilisant "GigabitEthernet0/0.10" comme interface NAT inside. Cette configuration permettra aux dispositifs du réseau VLAN 10 (sous-interface 10) d'utiliser NAT pour accéder à Internet, tandis que la sous-interface 20 est réservée au management et n'est pas routée.</p>
<h2 id="configuration-du-switch-pour-assurer-la-liaison">Configuration du switch pour assurer la liaison.</h2>
<p>Pour connecter le routeur à un commutateur (switch), vous pouvez configurer une connexion trunk(802.1q) entre le routeur et le commutateur si vous avez plusieurs VLANs sur le routeur (comme dans l'exemple précédent). Voici comment configurer un port du commutateur pour une connexion trunk vers le routeur Cisco.</p>
<p>Supposons que vous ayez deux VLANs spécifiques, VLAN 10 et VLAN 20, que vous souhaitez autoriser à communiquer avec le routeur. Vous avez déjà configuré les sous-interfaces correspondantes sur le routeur (comme dans l'exemple précédent).</p>
<p>Configuration du port du commutateur en mode trunk avec les VLANs autorisés :</p>
<p><code>bash
interface GigabitEthernet0/1
 switchport mode trunk
 switchport trunk allowed vlan 10,20</code></p>
<p>Dans cette configuration :</p>
<ul>
<li>switchport mode trunk configure le port du commutateur en mode trunk.</li>
<li>switchport trunk allowed vlan 10,20 spécifie que seuls les VLANs 10 et 20 sont autorisés à traverser le port trunk. Vous pouvez ajouter d'autres numéros de VLAN séparés par des virgules si nécessaire.</li>
</ul>
<p>Assurez-vous que la configuration de l'interface du commutateur est compatible avec la configuration des sous-interfaces sur le routeur. Cela garantira que le trafic VLAN entre le commutateur et le routeur est correctement étiqueté et routé.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
    
  </body>
</html>